/*!
 * vue-fields v1.1.2
 * https://github.com/pagekit/vue-fields
 * Released under the MIT License.
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).VueFields=t()}(this,function(){"use strict";var a,r={},u=Object.assign||function(n){for(var e=arguments.length,t=new Array(1<e?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return t.forEach(function(t){Object.keys(t||{}).forEach(function(e){return n[e]=t[e]})}),n},o=Array.isArray;function n(e,t){void 0===t&&(t="#41B883"),"undefined"!=typeof console&&r.devtools&&console.log("%c vue-fields %c "+e+" ","color: #fff; background: #35495E; padding: 1px; border-radius: 3px 0 0 3px;","color: #fff; background: "+t+"; padding: 1px; border-radius: 0 3px 3px 0;")}function l(e,t){void 0===t&&(t="#DB6B00"),n(e,t)}function s(e){return null!==e&&"object"==typeof e}function c(e){return void 0===e}function i(e,t,n){for(var r=o(t)?t:t.split("."),i=0;i<r.length;i++){if(!s(e)||c(e[r[i]]))return n;e=e[r[i]]}return e}var d={},v=/((?:\d|true|false|null|undefined|(?:this\.|\$)[\w.$]+|\W)*)([\w][\w.]*)?/g,f=/([^"']+)((.)(?:[^\3\\]|\\.)*?\3|.)?/g;function t(e,t){var n,r;if("number"==typeof e.length)for(n=0;n<e.length;n++)t.call(e[n],e[n],n);else if(s(e))for(r in e)e.hasOwnProperty(r)&&t.call(e[r],e[r],r);return e}var p={inject:["Fields"],props:{field:{type:Object,required:!0},values:{type:Object,required:!0}},data:function(){return u({name:"",label:"",attrs:{},options:[],default:void 0},this.field)},computed:{value:{get:function(){return i(this.values,this.name)},set:function(e){this.$emit("change",e,this)}},attributes:{get:function(){return this.Fields.evaluate(this.enable)?this.attrs:u({disabled:"true"},this.attrs)}}},created:function(){c(this.value)&&!c(this.default)&&(this.value=this.default)},methods:{filterOptions:function(e){var n=this,r=[];return e?t(e,function(e,t){s(e)?r.push({label:t,options:n.filterOptions(e)}):r.push({text:t,value:e})}):l("Invalid options provided for "+this.name),r}}},m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.fields,function(e){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.evaluate(e.show),expression:"evaluate(field.show)"}],key:e.name},["checkbox"!=e.type?n("label",[t._v(t._s(e.label))]):t._e(),t._v(" "),n(e.component,{tag:"component",attrs:{field:e,values:t.values},on:{change:t.change}})],1)}),0)},staticRenderFns:[],components:{FieldText:{render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],attrs:{type:"text"},domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}},"input",t.attributes,!1))},staticRenderFns:[],extends:p},FieldTextarea:{render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("textarea",t._b({directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}},"textarea",t.attributes,!1))},staticRenderFns:[],extends:p},FieldRadio:{render:function(){var n=this,e=n.$createElement,r=n._self._c||e;return r("div",[n._l(n.filterOptions(n.options),function(t){return[r("input",n._b({directives:[{name:"model",rawName:"v-model",value:n.value,expression:"value"}],attrs:{name:n.name,type:"radio"},domProps:{value:t.value,checked:n._q(n.value,t.value)},on:{change:function(e){n.value=t.value}}},"input",n.attributes,!1)),n._v(" "),r("label",[n._v(n._s(t.text))])]})],2)},staticRenderFns:[],extends:p},FieldCheckbox:{render:function(){var a=this,e=a.$createElement;return(a._self._c||e)("input",a._b({directives:[{name:"model",rawName:"v-model",value:a.value,expression:"value"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(a.value)?-1<a._i(a.value,null):a.value},on:{change:function(e){var t=a.value,n=e.target,r=!!n.checked;if(Array.isArray(t)){var i=a._i(t,null);n.checked?i<0&&(a.value=t.concat([null])):-1<i&&(a.value=t.slice(0,i).concat(t.slice(i+1)))}else a.value=r}}},"input",a.attributes,!1))},staticRenderFns:[],extends:p},FieldSelect:{render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("select",n._b({directives:[{name:"model",rawName:"v-model",value:n.value,expression:"value"}],on:{change:function(e){var t=Array.prototype.filter.call(e.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});n.value=e.target.multiple?t:t[0]}}},"select",n.attributes,!1),[n._l(n.filterOptions(n.options),function(e){return[e.label?t("optgroup",{attrs:{label:e.label}},n._l(e.options,function(e){return t("option",{domProps:{value:e.value}},[n._v(n._s(e.text))])}),0):t("option",{domProps:{value:e.value}},[n._v(n._s(e.text))])]})],2)},staticRenderFns:[],extends:p},FieldRange:{render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],attrs:{type:"range"},domProps:{value:t.value},on:{__r:function(e){t.value=e.target.value}}},"input",t.attributes,!1))},staticRenderFns:[],extends:p},FieldNumber:{render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],attrs:{type:"number"},domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}},"input",t.attributes,!1))},staticRenderFns:[],extends:p}},provide:function(){return{Fields:this}},props:{config:{type:[Object,Array],default:function(){return{}}},values:{type:Object,default:function(){return{}}},prefix:{type:String,default:"field-"}},computed:{fields:function(){return this.prepare()}},methods:{change:function(e,t){!function(e,t,n){for(var r=o(t)?t:t.split(".");1<r.length;){var i=r.shift();s(e[i])||a(e,i,{}),e=e[i]}a(e,r.shift(),n)}(this.values,t.name,e),this.$emit("change",e,t)},prepare:function(e,n){void 0===e&&(e=this.config),void 0===n&&(n=this.prefix);var r=o(e),i=[];return t(e,function(e,t){(e=u({},e)).name||r||(e.name=t),e.name?(e.type||(e.type="text"),e.component||(e.component=n+e.type),i.push(e)):l("Field name missing "+JSON.stringify(e))}),i},evaluate:function(e,t){void 0===t&&(t=this.values);try{return!!c(e)||(function(e){return"string"==typeof e}(e)&&(e=function(e){return d[e]=d[e]||Function("$values","$context","with($context){return "+e.replace(f,function(e,t,n){return void 0===n&&(n=""),t.replace(v,function(e,t,n){return void 0===t&&(t=""),e?t+(n?"$get('"+n+"')":""):""})+n})+"}")}(e)),function(e){return"function"==typeof e}(e)?e.call(this,t,{$match:h,$get:function(e){return i(t,e)}}):e)}catch(e){l(e)}return!0}}};function h(e,t,n){return e&&new RegExp(t,n).test(e)}var e={Field:p,Fields:m,install:function(e){this.installed||(function(e){var t=e.set,n=e.config;a=t,r=n}(e),n(this.version),e.component("field",p),e.component("fields",m))},version:"1.1.2"};return"undefined"!=typeof window&&window.Vue&&window.Vue.use(e),e});